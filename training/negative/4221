<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8" />
<title>Gadfly (database) - Wikipedia, the free encyclopedia</title>
<meta name="generator" content="MediaWiki 1.26wmf13" />
<link rel="alternate" href="android-app://org.wikipedia/http/en.m.wikipedia.org/wiki/Gadfly_(database)" />
<link rel="alternate" type="application/x-wiki" title="Edit this page" href="/w/index.php?title=Gadfly_(database)&amp;action=edit" />
<link rel="edit" title="Edit this page" href="/w/index.php?title=Gadfly_(database)&amp;action=edit" />
<link rel="apple-touch-icon" href="/static/apple-touch/wikipedia.png" />
<link rel="shortcut icon" href="/static/favicon/wikipedia.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="/w/opensearch_desc.php" title="Wikipedia (en)" />
<link rel="EditURI" type="application/rsd+xml" href="//en.wikipedia.org/w/api.php?action=rsd" />
<link rel="alternate" hreflang="x-default" href="/wiki/Gadfly_(database)" />
<link rel="copyright" href="//creativecommons.org/licenses/by-sa/3.0/" />
<link rel="alternate" type="application/atom+xml" title="Wikipedia Atom feed" href="/w/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="canonical" href="https://en.wikipedia.org/wiki/Gadfly_(database)" />
<link rel="stylesheet" href="//en.wikipedia.org/w/load.php?debug=false&amp;lang=en&amp;modules=ext.pygments%2Cwikihiero%7Cext.uls.nojs%7Cext.visualEditor.viewPageTarget.noscript%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cmediawiki.ui.button%7Cskins.vector.styles%7Cwikibase.client.init&amp;only=styles&amp;skin=vector&amp;*" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="//en.wikipedia.org/w/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector&amp;*" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: global:resourceloader:filter:minify-css:7:de1ab5287c9076b96eedd3f97a84a7b6 */</style>
<script src="//en.wikipedia.org/w/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Gadfly_(database)","wgTitle":"Gadfly (database)","wgCurRevisionId":574424191,"wgRevisionId":574424191,"wgArticleId":5281494,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Articles needing additional references from February 2011","All articles needing additional references","Wikipedia articles needing clarification from May 2012","All articles with unsourced statements","Articles with unsourced statements from September 2009","Articles needing cleanup from March 2012","All pages needing cleanup","Articles containing how-to sections","Free database management systems","Free software programmed in Python"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Gadfly_(database)","wgRelevantArticleId":5281494,"wgIsProbablyEditable":true,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgMediaViewerOnClick":true,"wgMediaViewerEnabledByDefault":true,"wikilove-recipient":"","wikilove-anon":0,"wgPoweredByHHVM":true,"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"hidesig":true,"preview":false,"publish":false},"wgBetaFeaturesFeatures":[],"wgVisualEditor":{"pageLanguageCode":"en","pageLanguageDir":"ltr","usePageImages":true,"usePageDescriptions":true},"wgGatherShouldShowTutorial":true,"wgULSAcceptLanguageList":["zh-cn","zh"],"wgULSCurrentAutonym":"English","wgFlaggedRevsParams":{"tags":{"status":{"levels":1,"quality":2,"pristine":3}}},"wgStableRevisionId":null,"wgCategoryTreePageCategoryOptions":"{\"mode\":0,\"hideprefix\":20,\"showcount\":true,\"namespaces\":false}","wgNoticeProject":"wikipedia","wgWikibaseItemId":"Q5516340"});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});
/* cache key: global:resourceloader:filter:minify-js:7:b2706269305541eba923c165462b22c4 */
}</script>
<script>if(window.mw){
mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","ext.centralauth.centralautologin","mmv.head","ext.imageMetrics.head","ext.visualEditor.viewPageTarget.init","ext.uls.init","ext.uls.interface","ext.centralNotice.bannerController","skins.vector.js"]);
}</script>
<link rel="dns-prefetch" href="//meta.wikimedia.org" />
<!--[if lt IE 7]><style type="text/css">body{behavior:url("/w/static/1.26wmf13/skins/Vector/csshover.min.htc")}</style><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Gadfly_database skin-vector action-view">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>

							<div id="siteNotice"><!-- CentralNotice --></div>
						<div class="mw-indicators">
</div>
			<h1 id="firstHeading" class="firstHeading" lang="en">Gadfly (database)</h1>
									<div id="bodyContent" class="mw-body-content">
									<div id="siteSub">From Wikipedia, the free encyclopedia</div>
								<div id="contentSub"></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><table class="metadata plainlinks ambox ambox-content ambox-Refimprove" role="presentation">
<tr>
<td class="mbox-image">
<div style="width:52px"><a href="/wiki/File:Question_book-new.svg" class="image"><img alt="" src="//upload.wikimedia.org/wikipedia/en/thumb/9/99/Question_book-new.svg/50px-Question_book-new.svg.png" width="50" height="39" srcset="//upload.wikimedia.org/wikipedia/en/thumb/9/99/Question_book-new.svg/75px-Question_book-new.svg.png 1.5x, //upload.wikimedia.org/wikipedia/en/thumb/9/99/Question_book-new.svg/100px-Question_book-new.svg.png 2x" data-file-width="262" data-file-height="204" /></a></div>
</td>
<td class="mbox-text"><span class="mbox-text-span">This article <b>needs additional citations for <a href="/wiki/Wikipedia:Verifiability" title="Wikipedia:Verifiability">verification</a></b>. <span class="hide-when-compact">Please help <a class="external text" href="//en.wikipedia.org/w/index.php?title=Gadfly_(database)&amp;action=edit">improve this article</a> by <a href="/wiki/Help:Introduction_to_referencing/1" title="Help:Introduction to referencing/1">adding citations to reliable sources</a>. Unsourced material may be challenged and removed.</span> <small><i>(February 2011)</i></small></span></td>
</tr>
</table>
<table class="infobox vevent" style="width:22em">
<caption class="summary">Gadfly</caption>
<tr>
<th scope="row" style="white-space: nowrap;"><a href="/wiki/Software_developer" title="Software developer">Developer(s)</a></th>
<td>Aaron Robert Watters</td>
</tr>
<tr>
<th scope="row" style="white-space: nowrap;">Initial release</th>
<td>1994<span style="display:none">&#160;(<span class="bday dtstart published updated">1994</span>)</span></td>
</tr>
<tr>
<th scope="row" style="white-space: nowrap;"><a href="/wiki/Software_release_life_cycle" title="Software release life cycle">Stable release</a></th>
<td>1.0 / January&#160;5,&#160;2005<span style="display:none">&#160;(<span class="bday dtstart published updated">2005-01-05</span>)</span></td>
</tr>
<tr>
<th scope="row" style="white-space: nowrap;">Written in</th>
<td><a href="/wiki/Python_(programming_language)" title="Python (programming language)">Python</a></td>
</tr>
<tr>
<th scope="row" style="white-space: nowrap;"><a href="/wiki/Operating_system" title="Operating system">Operating system</a></th>
<td><a href="/wiki/Cross-platform" title="Cross-platform">Cross-platform</a></td>
</tr>
<tr>
<th scope="row" style="white-space: nowrap;"><a href="/wiki/List_of_software_categories" title="List of software categories">Type</a></th>
<td><a href="/wiki/Relational_Database_Management_System" title="Relational Database Management System" class="mw-redirect">Relational Database Management System</a></td>
</tr>
<tr>
<th scope="row" style="white-space: nowrap;"><a href="/wiki/Software_license" title="Software license">License</a></th>
<td><a href="/wiki/Python_License" title="Python License">Python License</a></td>
</tr>
<tr>
<th scope="row" style="white-space: nowrap;">Website</th>
<td><a rel="nofollow" class="external free" href="http://gadfly.sourceforge.net/">http://gadfly.sourceforge.net/</a></td>
</tr>
</table>
<div class="noprint portal tright" style="border:solid #aaa 1px;margin:0.5em 0 0.5em 1em">
<table style="background:#f9f9f9;font-size:85%;line-height:110%;max-width:175px">
<tr style="vertical-align:middle">
<td style="text-align:center"><a href="/wiki/File:Nuvola_apps_emacs_vector.svg" class="image"><img alt="Portal icon" src="//upload.wikimedia.org/wikipedia/commons/thumb/6/67/Nuvola_apps_emacs_vector.svg/28px-Nuvola_apps_emacs_vector.svg.png" width="28" height="28" class="noviewer" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/6/67/Nuvola_apps_emacs_vector.svg/42px-Nuvola_apps_emacs_vector.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/6/67/Nuvola_apps_emacs_vector.svg/56px-Nuvola_apps_emacs_vector.svg.png 2x" data-file-width="160" data-file-height="160" /></a></td>
<td style="padding:0 0.2em;vertical-align:middle;font-style:italic;font-weight:bold"><a href="/wiki/Portal:Free_software" title="Portal:Free software">Free software portal</a></td>
</tr>
<tr style="vertical-align:middle">
<td style="text-align:center"><a href="/wiki/File:Portal-puzzle.svg" class="image"><img alt="Portal icon" src="//upload.wikimedia.org/wikipedia/en/thumb/f/fd/Portal-puzzle.svg/32px-Portal-puzzle.svg.png" width="32" height="28" class="noviewer" srcset="//upload.wikimedia.org/wikipedia/en/thumb/f/fd/Portal-puzzle.svg/48px-Portal-puzzle.svg.png 1.5x, //upload.wikimedia.org/wikipedia/en/thumb/f/fd/Portal-puzzle.svg/64px-Portal-puzzle.svg.png 2x" data-file-width="32" data-file-height="28" /></a></td>
<td style="padding:0 0.2em;vertical-align:middle;font-style:italic;font-weight:bold"><a href="/wiki/Portal:Python_programming" title="Portal:Python programming">Python programming portal</a></td>
</tr>
</table>
</div>
<p><b>Gadfly</b> is a <a href="/wiki/Relational_database_management_system" title="Relational database management system">relational database management system</a> written in <a href="/wiki/Python_(programming_language)" title="Python (programming language)">Python</a>. Gadfly is a collection of Python modules that provides relational database functionality entirely implemented in Python. It supports a subset of the standard RDBMS <a href="/wiki/SQL" title="SQL">Structured Query Language (SQL)</a>.<sup id="cite_ref-1" class="reference"><a href="#cite_note-1"><span>[</span>1<span>]</span></a></sup><sup id="cite_ref-2" class="reference"><a href="#cite_note-2"><span>[</span>2<span>]</span></a></sup></p>
<p>Gadfly runs wherever Python runs and supports <a href="/wiki/Client_(computing)" title="Client (computing)">client</a>/<a href="/wiki/Server_(computing)" title="Server (computing)">server</a> on any platform that supports the standard Python <a href="/wiki/Berkeley_sockets" title="Berkeley sockets">socket</a> interface. The <a href="/wiki/File_format" title="File format">file formats</a> used by Gadfly for storage are cross-platform—a gadfly database directory can be moved from <a href="/wiki/Windows_95" title="Windows 95">Windows 95</a> to <a href="/wiki/Linux" title="Linux">Linux</a> using a binary copying mechanism and gadfly will read and run the database.</p>
<p>It supports persistent databases consisting of a collection of structured tables with indices, and a large subset of SQL for accessing and modifying those tables. It supports a log-based recovery protocol which allows committed operations of a <a href="/wiki/Database" title="Database">database</a> to be recovered even if the database was not shut down<sup class="noprint Inline-Template" style="white-space:nowrap;">[<i><a href="/wiki/Wikipedia:Please_clarify" title="Wikipedia:Please clarify"><span title="The text near this tag may need clarification or removal of jargon. (May 2012)">clarification needed</span></a></i>]</sup> in a proper manner (i.e., in the event of a <a href="/wiki/Central_processing_unit" title="Central processing unit">CPU</a> or <a href="/wiki/Software" title="Software">software</a> crash, [but not in the event of a disk crash]). It also supports a <a href="/wiki/TCP/IP" title="TCP/IP" class="mw-redirect">TCP/IP</a> Client/Server mode where remote clients can access a Gadfly database over a TCP/IP network (such as the Internet) subject to configurable security mechanisms.</p>
<p>Since Gadfly depends intimately on the kw<a href="/wiki/Parsing" title="Parsing">Parsing</a> package it is distributed as part of the kwParsing package, under the same copyright.</p>
<p>Gadfly allows Python programs to store, retrieve and query tabular data without having to rely on any external database engine or package. It provides an in-memory relational database style engine for Python programs, complete with a notion of a "committed, recoverable transaction" and "aborts".<sup class="noprint Inline-Template Template-Fact" style="white-space:nowrap;">[<i><a href="/wiki/Wikipedia:Citation_needed" title="Wikipedia:Citation needed"><span title="This claim needs references to reliable sources. (September 2009)">citation needed</span></a></i>]</sup></p>
<p></p>
<div id="toc" class="toc">
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Usage"><span class="tocnumber">1</span> <span class="toctext">Usage</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Creating_a_new_database"><span class="tocnumber">1.1</span> <span class="toctext">Creating a new database</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Reconnecting_to_an_existing_database"><span class="tocnumber">1.2</span> <span class="toctext">Reconnecting to an existing database</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Features"><span class="tocnumber">1.3</span> <span class="toctext">Features</span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="#The_SELECT_statement"><span class="tocnumber">1.3.1</span> <span class="toctext">The SELECT statement</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#Table_creation_and_.22data_types.22"><span class="tocnumber">1.3.2</span> <span class="toctext">Table creation and "data types"</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="#Dynamic_values"><span class="tocnumber">1.3.3</span> <span class="toctext">Dynamic values</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="#Multiple_batch_inserts_and_dynamic_values"><span class="tocnumber">1.3.4</span> <span class="toctext">Multiple batch inserts and dynamic values</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="#Introspection"><span class="tocnumber">1.3.5</span> <span class="toctext">Introspection</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-10"><a href="#Interactive_testing"><span class="tocnumber">1.4</span> <span class="toctext">Interactive testing</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="#Architecture"><span class="tocnumber">2</span> <span class="toctext">Architecture</span></a></li>
<li class="toclevel-1 tocsection-12"><a href="#Tools"><span class="tocnumber">3</span> <span class="toctext">Tools</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="#Concurrency"><span class="tocnumber">4</span> <span class="toctext">Concurrency</span></a></li>
<li class="toclevel-1 tocsection-14"><a href="#References"><span class="tocnumber">5</span> <span class="toctext">References</span></a></li>
<li class="toclevel-1 tocsection-15"><a href="#External_links"><span class="tocnumber">6</span> <span class="toctext">External links</span></a></li>
</ul>
</div>
<p></p>
<h2><span class="mw-headline" id="Usage">Usage</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Gadfly_(database)&amp;action=edit&amp;section=1" title="Edit section: Usage">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<table class="metadata plainlinks ambox ambox-content" role="presentation">
<tr>
<td class="mbox-image">
<div style="width:52px"><img alt="" src="//upload.wikimedia.org/wikipedia/commons/thumb/b/b4/Ambox_important.svg/40px-Ambox_important.svg.png" width="40" height="40" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/b/b4/Ambox_important.svg/60px-Ambox_important.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/b/b4/Ambox_important.svg/80px-Ambox_important.svg.png 2x" data-file-width="40" data-file-height="40" /></div>
</td>
<td class="mbox-text"><span class="mbox-text-span">This section <b>contains <a href="/wiki/Wikipedia:What_Wikipedia_is_not#NOTHOWTO" title="Wikipedia:What Wikipedia is not">instructions, advice, or how-to content</a></b>. <span class="hide-when-compact">The purpose of Wikipedia is to present facts, not to train. Please help <a class="external text" href="//en.wikipedia.org/w/index.php?title=Gadfly_(database)&amp;action=edit">improve this article</a> either by rewriting the how-to content or by <a href="//meta.wikimedia.org/wiki/Help:Transwiki" class="extiw" title="m:Help:Transwiki">moving</a> it to <a href="//en.wikiversity.org/wiki/" class="extiw" title="v:">Wikiversity</a>, <a href="//en.wikibooks.org/wiki/" class="extiw" title="b:">Wikibooks</a> or <a href="//en.wikivoyage.org/wiki/" class="extiw" title="voy:">Wikivoyage</a></span> <small><i>(March 2012)</i></small></span></td>
</tr>
</table>
<p>The main "gadfly" module attempts to faithfully adhere to <a href="/wiki/Greg_Stein" title="Greg Stein">Greg Stein</a>'s Python Database <a href="/wiki/Application_programming_interface" title="Application programming interface">API</a>, as discussed and certified by the Python DB-SIG.</p>
<p>Concurrent database updates are not supported. The "databases" are currently designed to be written/modified by one process in isolation. Multiple processes can access<sup class="noprint Inline-Template" style="white-space:nowrap;">[<i><a href="/wiki/Wikipedia:Please_clarify" title="Wikipedia:Please clarify"><span title="The text near this tag may need clarification or removal of jargon. (May 2012)">clarification needed</span></a></i>]</sup> a Gadfly database when accesses are arbitrated by a TCP/IP Gadfly server process.</p>
<h3><span class="mw-headline" id="Creating_a_new_database">Creating a new database</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Gadfly_(database)&amp;action=edit&amp;section=2" title="Edit section: Creating a new database">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Unlike most Python/database-engine interfaces Gadfly databases must be created using Python. To accomplish this programmers use:</p>
<div class="mw-highlight">
<pre>
<span class="kn">import</span> <span class="nn">gadfly</span>
<span class="n">connection</span> <span class="o">=</span> <span class="n">gadfly</span><span class="o">.</span><span class="n">gadfly</span><span class="p">()</span>
</pre></div>
<p>with no arguments. Then they startup a database using the startup method:</p>
<div class="mw-highlight">
<pre>
<span class="n">connection</span><span class="o">.</span><span class="n">startup</span><span class="p">(</span><span class="s">"mydatabase"</span><span class="p">,</span> <span class="s">"mydirectory"</span><span class="p">)</span>
</pre></div>
<p>Here "mydirectory" must be a directory which exists and which can be written to in order to store the database files. The startup creates some files in "mydirectory". This has the effect of <a href="/wiki/Clobbering" title="Clobbering">clobbering</a> any existing Gadfly database called "mydatabase" in the directory "mydirectory". Gadfly will not allow a start up the same connection twice, however.</p>
<p>The first "<code>import gadfly</code>" reads in and initializes some rather large data structures used for parsing SQL, and thus may take longer than other module imports.</p>
<p>Within the database the user can create tables, populate them, and commit the result when they are happy:</p>
<div class="mw-highlight">
<pre>
<span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">"CREATE TABLE ph (nm VARCHAR, ph VARCHAR)"</span><span class="p">)</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">"INSERT INTO ph(nm, ph) VALUES ('arw', '3367')"</span><span class="p">)</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">"SELECT * FROM ph"</span><span class="p">)</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">():</span>
    <span class="k">print</span> <span class="n">x</span>
    <span class="c"># prints ('arw', '3367')</span>
<span class="n">connection</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>
<h3><span class="mw-headline" id="Reconnecting_to_an_existing_database">Reconnecting to an existing database</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Gadfly_(database)&amp;action=edit&amp;section=3" title="Edit section: Reconnecting to an existing database">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Once a database exists it can be reconnected to:</p>
<div class="mw-highlight">
<pre>
<span class="kn">import</span> <span class="nn">gadfly</span>
<span class="n">connection</span> <span class="o">=</span> <span class="n">gadfly</span><span class="o">.</span><span class="n">gadfly</span><span class="p">(</span><span class="s">"mydatabase"</span><span class="p">,</span> <span class="s">"mydirectory"</span><span class="p">)</span>
</pre></div>
<p>This will read in the database tables with the most recently committed values. The initialized database is then queried and updated:</p>
<div class="mw-highlight">
<pre>
<span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">"UPDATE ph SET nm='aaron' WHERE nm='arw'"</span><span class="p">)</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">"SELECT * FROM ph"</span><span class="p">)</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">():</span>
    <span class="k">print</span> <span class="n">x</span>
    <span class="c"># prints ('aaron', '3367')</span>
</pre></div>
<p>If the user does not want to commit updates then the do not execute a commit on the connection object (which writes out the tables). To restore the old values from the existing database they use:</p>
<div class="mw-highlight">
<pre>
<span class="n">connection</span><span class="o">.</span><span class="n">abort</span><span class="p">()</span>
</pre></div>
<p>Updates are only stored upon a connection.commit(). [Actually, if autocheckpoint is disabled, updates are only stored to table files on checkpoint—see the documentation on the recovery mechanism.]</p>
<div class="mw-highlight">
<pre>
<span class="k">print</span> <span class="n">cursor</span><span class="o">.</span><span class="n">pp</span><span class="p">()</span>
</pre></div>
<p>to "pretty print" the result of any evaluation (which might be <code>None</code> for a non-select).</p>
<h3><span class="mw-headline" id="Features">Features</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Gadfly_(database)&amp;action=edit&amp;section=4" title="Edit section: Features">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>In this version all tables are read into memory upon "connecting" to the database and "touched" tables are written out upon checkpoint. Each table is represented as a separate file in the destination directory, and there is a "data definition" file as well (a list of data definition declarations). During active use a <a href="/wiki/Computer_data_logging" title="Computer data logging" class="mw-redirect">log file</a> appears in the active directory as well, and if the process crashes this log file is used to recover committed operations.</p>
<h4><span class="mw-headline" id="The_SELECT_statement">The SELECT statement</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Gadfly_(database)&amp;action=edit&amp;section=5" title="Edit section: The SELECT statement">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>At this point Gadfly supports quite a lot of the SQL semantics requested in the ODBC 2.0 specification. SQL statements supported include the SELECT:</p>
<div class="mw-highlight">
<pre>
<span class="k">SELECT</span> <span class="p">[</span><span class="k">DISTINCT</span><span class="o">|</span><span class="k">ALL</span><span class="p">]</span> <span class="n">expressions</span> <span class="k">or</span> <span class="o">*</span>
  <span class="k">FROM</span> <span class="n">tables</span>
    <span class="p">[</span><span class="k">WHERE</span> <span class="n">condition</span><span class="p">]</span>
    <span class="p">[</span><span class="k">GROUP</span> <span class="k">BY</span> <span class="k">group</span><span class="o">-</span><span class="n">expressions</span><span class="p">]</span>
    <span class="p">[</span><span class="k">HAVING</span> <span class="k">aggregate</span><span class="o">-</span><span class="n">condition</span><span class="p">]</span>
    <span class="p">[</span><span class="k">union</span><span class="o">-</span><span class="n">clause</span><span class="p">]</span>
    <span class="p">[</span><span class="k">ORDER</span> <span class="k">BY</span> <span class="n">columns</span><span class="p">]</span>
</pre></div>
<p>This statement is quite powerful. It reads as follows:</p>
<ol>
<li>Make all combinations of rows from the tables (FROM line)</li>
<li>Eliminate those combinations not satisfying condition (WHERE line)</li>
<li>(if GROUP present) form aggregate groups that match on group-expressions</li>
<li>(if HAVING present) eliminate aggregate groups that don't satisfy the aggregate-condition.</li>
<li>compute the columns to keep (SELECT line).</li>
<li>(if union-clause present) combine (union, difference, intersect) the result with the result of another select statement.</li>
<li>if DISTINCT, throw out redundant entries.</li>
<li>(if ORDER present) order the result by the columns (ascending or descending as specified, with precedence as listed).</li>
</ol>
<p>The actual implementation in gadfly is much better than the intuitive reading, particularly at steps 1 and 2 (which are combined via optimizing transformations and hash join algorithms).</p>
<p>Conditions may include equalities, and inequalities of expressions. Conditions may also be combined using AND, OR, NOT. Expressions include column names, constants, and standard arithmetic operations over them.</p>
<p>Embedded queries supported include subquery expressions, expr IN (subselect), quantified comparisons, and the EXISTS (subselect) predicate.</p>
<p>Aggregate tests and computations can only be applied after the GROUPing and before the columns are selected (steps 3,4,5). Aggregate operations include COUNT(*), COUNT(expression), AVG(expression), SUM(expression), MAX(expression), MIN(expression), and the non-standard MEDIAN(expression). These may be applied to DISTINCT values (throwing out redundancies, as in COUNT(DISTINCT drinker). if no GROUPing is present the aggregate computations apply to the entire result after step 2.</p>
<p>There is much more to know about the SELECT statement. The test suite test/test_gadfly.py gives numerous examples of SELECT statements.</p>
<h4><span class="mw-headline" id="Table_creation_and_.22data_types.22">Table creation and "data types"</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Gadfly_(database)&amp;action=edit&amp;section=6" title="Edit section: Table creation and &quot;data types&quot;">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Create tables using the CREATE TABLE statement:</p>
<div class="mw-highlight">
<pre>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">name</span> <span class="p">(</span><span class="n">colname</span> <span class="n">datatype</span> <span class="p">[,</span> <span class="n">colname</span> <span class="n">datatype</span><span class="p">...])</span>
</pre></div>
<p>Data types currently "supported" are <a href="/wiki/Integer" title="Integer">integer</a>, <a href="/wiki/Floating_point" title="Floating point">float</a>, and <a href="/wiki/Varchar" title="Varchar">varchar</a>. They are ignored by the implementation, anything that is hashable and marshallable can currently go in any column (but that is likely to change). For example:</p>
<div class="mw-highlight">
<pre>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">frequents</span>
<span class="p">(</span><span class="n">drinker</span> <span class="nb">VARCHAR</span><span class="p">,</span>
<span class="n">bar</span> <span class="nb">VARCHAR</span><span class="p">,</span>
<span class="n">perweek</span> <span class="nb">INTEGER</span><span class="p">)</span>
</pre></div>
<p>At present tuples, complexes, or anything else can be put into a column specified as "VARCHAR". Other supported statements</p>
<p>Gadfly also supports the searched DELETE and UPDATE; INSERT VALUES and INSERT subselect; CREATE/DROP INDEX, and DROP TABLE. These have the informal syntax:</p>
<div class="mw-highlight">
<pre>
<span class="k">DELETE</span> <span class="k">FROM</span> <span class="k">table</span> <span class="k">WHERE</span> <span class="n">condition</span>
<span class="k">UPDATE</span> <span class="k">table</span> <span class="k">SET</span> <span class="n">col</span><span class="o">=</span><span class="n">expr</span> <span class="p">[,</span> <span class="n">col</span><span class="o">=</span><span class="n">expr</span><span class="p">...]</span> <span class="k">WHERE</span> <span class="n">condition</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="k">table</span> <span class="p">[(</span><span class="k">column</span> <span class="p">[,</span> <span class="k">column</span><span class="p">...])]</span> <span class="k">VALUES</span> <span class="p">(</span><span class="n">value</span> <span class="p">[,</span> <span class="n">value</span><span class="p">...])</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="k">table</span> <span class="p">[(</span><span class="k">column</span> <span class="p">[,</span> <span class="k">column</span><span class="p">...])]</span> <span class="n">subselect</span>
<span class="k">CREATE</span> <span class="p">[</span><span class="k">UNIQUE</span><span class="p">]</span> <span class="k">INDEX</span> <span class="n">name</span> <span class="k">ON</span> <span class="k">table</span> <span class="p">(</span><span class="k">column</span> <span class="p">[,</span> <span class="k">column</span><span class="p">...])</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="k">table</span>
<span class="k">DROP</span> <span class="k">INDEX</span> <span class="n">name</span>
</pre></div>
<p>Multiple statements may be executed in one cursor.execute(S) by separating the statements with semicolons in S, for example S might have the string value:</p>
<div class="mw-highlight">
<pre>
<span class="k">DROP</span> <span class="k">INDEX</span> <span class="n">tdindex</span><span class="p">;</span>
<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">templikes</span>
</pre></div>
<p>SQL is case insensitive.</p>
<h4><span class="mw-headline" id="Dynamic_values">Dynamic values</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Gadfly_(database)&amp;action=edit&amp;section=7" title="Edit section: Dynamic values">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Expressions also include the special expression '?' (the ODBC-style dynamic expression) as in:</p>
<div class="mw-highlight">
<pre>
<span class="n">insertstat</span> <span class="o">=</span> <span class="s">"INSERT INTO ph(nm,ph) VALUES (?, ?)"</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">insertstat</span><span class="p">,</span> <span class="p">(</span><span class="s">'nan'</span><span class="p">,</span> <span class="s">"0356"</span><span class="p">))</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">insertstat</span><span class="p">,</span> <span class="p">(</span><span class="s">'bill'</span><span class="p">,</span> <span class="s">"2356"</span><span class="p">))</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">insertstat</span><span class="p">,</span> <span class="p">(</span><span class="s">'tom'</span><span class="p">,</span> <span class="s">"4356"</span><span class="p">))</span>
</pre></div>
<p>Dynamic values allow the cursor to use the same parsed expression many times for a similar operation. Above the insertstat is parsed and bound to the database only once. Using dynamic attributes should speed up accesses. Thus the above should run much faster than the equivalent:</p>
<div class="mw-highlight">
<pre>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">"INSERT INTO ph(nm,ph) VALUES ('nan', '0356')"</span><span class="p">)</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">"INSERT INTO ph(nm,ph) VALUES ('bill', '2356')"</span><span class="p">)</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">"INSERT INTO ph(nm,ph) VALUES ('tom', '4356')"</span><span class="p">)</span>
</pre></div>
<p>Dynamic attributes can appear in other statements containing expressions (such as SELECTs, UPDATEs and DELETEs too).</p>
<p>For SELECT, UPDATE, and DELETE the dynamic expression substitutions must consist of a single tuple, as in:</p>
<div class="mw-highlight">
<pre>
  <span class="n">stat</span> <span class="o">=</span> <span class="s">"SELECT * FROM ph WHERE nm=?"</span>
  <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stat</span><span class="p">,</span> <span class="p">(</span><span class="s">"nan"</span><span class="p">,))</span>
  <span class="o">...</span>
  <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stat</span><span class="p">,</span> <span class="p">(</span><span class="s">"bob"</span><span class="p">,))</span>
  <span class="o">...</span>
</pre></div>
<p>Since the dynamic substitution eliminates the need for parsing and binding (expensive operations!) the above should run faster than the equivalent:</p>
<div class="mw-highlight">
<pre>
 <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">"SELECT * FROM ph WHERE nm='nan'"</span><span class="p">)</span>
 <span class="o">...</span>
 <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">"SELECT * FROM ph WHERE nm='bob'"</span><span class="p">)</span>
 <span class="o">...</span>
</pre></div>
<p>If several similar queries are repeated multiple times, each query "template string" is associated with a unique cursor object so that each template must be parsed and bound only once. Some relatively complex queries from the test suite run 2 to 3 times faster after they have been parsed and bound, even without the kjbuckets builtin. With kjbuckets the same ran 5 to 10 times faster.</p>
<h4><span class="mw-headline" id="Multiple_batch_inserts_and_dynamic_values">Multiple batch inserts and dynamic values</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Gadfly_(database)&amp;action=edit&amp;section=8" title="Edit section: Multiple batch inserts and dynamic values">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>For the special case of INSERT VALUES a list of substitution tuples allows the query engine to perform the inserts in optimized batch mode. Thus the fastest way to perform the three inserts given earlier is:</p>
<div class="mw-highlight">
<pre>
<span class="n">data</span> <span class="o">=</span> <span class="p">[(</span><span class="s">'nan'</span><span class="p">,</span> <span class="s">"0356"</span><span class="p">)),</span> <span class="p">(</span><span class="s">'bill'</span><span class="p">,</span> <span class="s">"2356"</span><span class="p">),</span> <span class="p">(</span><span class="s">'tom'</span><span class="p">,</span> <span class="s">"4356"</span><span class="p">)]</span>
<span class="n">stat</span> <span class="o">=</span> <span class="s">"INSERT INTO ph(nm,ph) VALUES (?, ?)"</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stat</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</pre></div>
<p>It would be even faster if the cursor had previously executed the stat with different data (since then no parsing or binding would occur).</p>
<h4><span class="mw-headline" id="Introspection">Introspection</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Gadfly_(database)&amp;action=edit&amp;section=9" title="Edit section: Introspection">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>By default a gadfly database automatically includes "introspective" tables which allow a gadfly query to "query the shape of the database"—for example to view table names and names of rows in tables:</p>
<div class="mw-highlight">
<pre>
 <span class="o">&gt;&gt;&gt;</span> <span class="n">g</span> <span class="o">=</span> <span class="n">gadfly</span><span class="p">()</span>
 <span class="o">&gt;&gt;&gt;</span> <span class="n">g</span><span class="o">.</span><span class="n">startup</span><span class="p">(</span><span class="s">"dbtest"</span><span class="p">,</span> <span class="s">"dbtest"</span><span class="p">)</span>
 <span class="o">&gt;&gt;&gt;</span> <span class="n">c</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
 <span class="o">&gt;&gt;&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">"select * from __table_names__"</span><span class="p">)</span>
 <span class="o">&gt;&gt;&gt;</span> <span class="k">print</span> <span class="n">c</span><span class="o">.</span><span class="n">pp</span><span class="p">()</span>
 <span class="n">IS_VIEW</span> <span class="o">|</span> <span class="n">TABLE_NAME</span>
 <span class="o">=========================</span>
 <span class="mi">1</span>       <span class="o">|</span> <span class="n">__TABLE_NAMES__</span>
 <span class="mi">1</span>       <span class="o">|</span> <span class="n">DUAL</span>
 <span class="mi">1</span>       <span class="o">|</span> <span class="n">__DATADEFS__</span>
 <span class="mi">1</span>       <span class="o">|</span> <span class="n">__COLUMNS__</span>
 <span class="mi">1</span>       <span class="o">|</span> <span class="n">__INDICES__</span>
 <span class="mi">1</span>       <span class="o">|</span> <span class="n">__INDEXCOLS__</span>
</pre></div>
<p>Here DUAL is a standard one row/one column test table (from the Oracle tradition) and the other tables provide information about the database schema:</p>
<div class="mw-highlight">
<pre>
 <span class="o">&gt;&gt;&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">"create table t1 (a varchar, b varchar)"</span><span class="p">)</span>
 <span class="o">&gt;&gt;&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">"create table t2 (b varchar, c varchar)"</span><span class="p">)</span>
 <span class="o">&gt;&gt;&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">"create unique index t1a on t1(a)"</span><span class="p">)</span>
 <span class="o">&gt;&gt;&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">"create index t1b on t1(b)"</span><span class="p">)</span>
 <span class="o">&gt;&gt;&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">"select * from __table_names__"</span><span class="p">)</span>
 <span class="o">&gt;&gt;&gt;</span> <span class="k">print</span> <span class="n">c</span><span class="o">.</span><span class="n">pp</span><span class="p">()</span>
 <span class="n">IS_VIEW</span> <span class="o">|</span> <span class="n">TABLE_NAME</span>
 <span class="o">=========================</span>
 <span class="mi">0</span>       <span class="o">|</span> <span class="n">T1</span>
 <span class="mi">1</span>       <span class="o">|</span> <span class="n">__DATADEFS__</span>
 <span class="mi">1</span>       <span class="o">|</span> <span class="n">__INDICES__</span>
 <span class="mi">0</span>       <span class="o">|</span> <span class="n">T2</span>
 <span class="mi">1</span>       <span class="o">|</span> <span class="n">__TABLE_NAMES__</span>
 <span class="mi">1</span>       <span class="o">|</span> <span class="n">__COLUMNS__</span>
 <span class="mi">1</span>       <span class="o">|</span> <span class="n">DUAL</span>
 <span class="mi">1</span>       <span class="o">|</span> <span class="n">__INDEXCOLS__</span>
 <span class="o">&gt;&gt;&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">"select * from __columns__"</span><span class="p">)</span>
 <span class="o">&gt;&gt;&gt;</span> <span class="k">print</span> <span class="n">c</span><span class="o">.</span><span class="n">pp</span><span class="p">()</span>
 <span class="n">COLUMN_NAME</span> <span class="o">|</span> <span class="n">TABLE_NAME</span>
 <span class="o">=============================</span>
 <span class="n">A</span>           <span class="o">|</span> <span class="n">T1</span>
 <span class="n">B</span>           <span class="o">|</span> <span class="n">T1</span>
 <span class="n">NAME</span>        <span class="o">|</span> <span class="n">__DATADEFS__</span>
 <span class="n">DEFN</span>        <span class="o">|</span> <span class="n">__DATADEFS__</span>
 <span class="n">INDEX_NAME</span>  <span class="o">|</span> <span class="n">__INDICES__</span>
 <span class="n">TABLE_NAME</span>  <span class="o">|</span> <span class="n">__INDICES__</span>
 <span class="n">IS_UNIQUE</span>   <span class="o">|</span> <span class="n">__INDICES__</span>
 <span class="n">TABLE_NAME</span>  <span class="o">|</span> <span class="n">__TABLE_NAMES__</span>
 <span class="n">IS_VIEW</span>     <span class="o">|</span> <span class="n">__TABLE_NAMES__</span>
 <span class="n">B</span>           <span class="o">|</span> <span class="n">T2</span>
 <span class="n">C</span>           <span class="o">|</span> <span class="n">T2</span>
 <span class="n">COLUMN1</span>     <span class="o">|</span> <span class="n">DUAL</span>
 <span class="n">TABLE_NAME</span>  <span class="o">|</span> <span class="n">__COLUMNS__</span>
 <span class="n">COLUMN_NAME</span> <span class="o">|</span> <span class="n">__COLUMNS__</span>
 <span class="n">INDEX_NAME</span>  <span class="o">|</span> <span class="n">__INDEXCOLS__</span>
 <span class="n">COLUMN_NAME</span> <span class="o">|</span> <span class="n">__INDEXCOLS__</span>
 <span class="o">&gt;&gt;&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">"select * from __indices__"</span><span class="p">)</span>
 <span class="o">&gt;&gt;&gt;</span> <span class="k">print</span> <span class="n">c</span><span class="o">.</span><span class="n">pp</span><span class="p">()</span>
 <span class="n">IS_UNIQUE</span> <span class="o">|</span> <span class="n">TABLE_NAME</span> <span class="o">|</span> <span class="n">INDEX_NAME</span>
 <span class="o">===================================</span>
 <span class="mi">0</span>         <span class="o">|</span> <span class="n">T1</span>         <span class="o">|</span> <span class="n">T1B</span>
 <span class="mi">1</span>         <span class="o">|</span> <span class="n">T1</span>         <span class="o">|</span> <span class="n">T1A</span>
 <span class="o">&gt;&gt;&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">"select * from __indexcols__"</span><span class="p">)</span>
 <span class="o">&gt;&gt;&gt;</span> <span class="k">print</span> <span class="n">c</span><span class="o">.</span><span class="n">pp</span><span class="p">()</span>
 <span class="n">COLUMN_NAME</span> <span class="o">|</span> <span class="n">INDEX_NAME</span>
 <span class="o">========================</span>
 <span class="n">B</span>           <span class="o">|</span> <span class="n">T1B</span>
 <span class="n">A</span>           <span class="o">|</span> <span class="n">T1A</span>
 <span class="o">&gt;&gt;&gt;</span> <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">"select * from dual"</span><span class="p">)</span>
 <span class="o">&gt;&gt;&gt;</span> <span class="k">print</span> <span class="n">c</span><span class="o">.</span><span class="n">pp</span><span class="p">()</span>
 <span class="n">COLUMN1</span>
 <span class="o">=======</span>
 <span class="mi">0</span>
</pre></div>
<h3><span class="mw-headline" id="Interactive_testing">Interactive testing</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Gadfly_(database)&amp;action=edit&amp;section=10" title="Edit section: Interactive testing">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>After installation, the created database can be interactively tested from the same directory using the interactive interpreter:</p>
<div class="mw-highlight">
<pre>
<span class="go">Python 2.1.3 (#1, Apr 30 2002, 19:37:40)</span>
<span class="go">[GCC 2.96 20000731 (Red Hat Linux 7.1 2.96-96)] on linux2</span>
<span class="go">Type "copyright", "credits" or "license" for more information.</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">gadfly</span> <span class="kn">import</span> <span class="n">gadfly</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">connection</span> <span class="o">=</span> <span class="n">gadfly</span><span class="p">(</span><span class="s">"test"</span><span class="p">,</span> <span class="s">"dbtest"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">"select * from frequents"</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cursor</span><span class="o">.</span><span class="n">description</span>
<span class="go">(('DRINKER', None, None, None, None, None, None), ('PERWEEK', None, None,</span>
<span class="go">None, None, None, None), ('BAR', None, None, None, None, None, None))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">cursor</span><span class="o">.</span><span class="n">pp</span><span class="p">()</span>
<span class="go">DRINKER | PERWEEK | BAR</span>
<span class="go">============================</span>
<span class="go">adam    | 1       | lolas</span>
<span class="go">woody   | 5       | cheers</span>
<span class="go">sam     | 5       | cheers</span>
<span class="go">norm    | 3       | cheers</span>
<span class="go">wilt    | 2       | joes</span>
<span class="go">norm    | 1       | joes</span>
<span class="go">lola    | 6       | lolas</span>
<span class="go">norm    | 2       | lolas</span>
<span class="go">woody   | 1       | lolas</span>
<span class="go">pierre  | 0       | frankies</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
<h2><span class="mw-headline" id="Architecture">Architecture</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Gadfly_(database)&amp;action=edit&amp;section=11" title="Edit section: Architecture">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The SQL grammar is described in grammar.py, the binding of the grammar constructs to semantic objects is performed in bindings.py, the semantic objects and their execution strategies is defined in semantics.py. The semantics use a lot of classical and non-classical logic (<a href="/w/index.php?title=Cylindric_logic&amp;action=edit&amp;redlink=1" class="new" title="Cylindric logic (page does not exist)">cylindric logic</a>) as well as optimization heuristics to define a relatively efficient and correct implementation of SQL.</p>
<p>The most basic data structures of the implementation are given in either kjbuckets0.py or the faster kjbucketsmodule.c, which implement the same data type signatures in Python and in a C extension to Python respectively.</p>
<p>The database.py module is a simple wrapper that provides a standard DBAPI interface to the system.</p>
<p>The test suite test/test_gadfly.py attempts to provide a regression test and a demonstration of the system.</p>
<p>The SQL parser also requires the kwParsing parser generation package, which consists of a number of additional python modules.</p>
<h2><span class="mw-headline" id="Tools">Tools</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Gadfly_(database)&amp;action=edit&amp;section=12" title="Edit section: Tools">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>With gfplus a gadfly database can be interactively manipulated with SQL commands. The tool works similar to <a href="/wiki/Oracle_Database" title="Oracle Database">Oracle</a>'s <a href="/wiki/SQL*Plus" title="SQL*Plus">SQL*Plus</a>.</p>
<h2><span class="mw-headline" id="Concurrency">Concurrency</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Gadfly_(database)&amp;action=edit&amp;section=13" title="Edit section: Concurrency">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Because it lacks true <a href="/wiki/Concurrency_control" title="Concurrency control">concurrency control</a> and file-system based indexing it is not appropriate for very large multiprocess <a href="/wiki/Database_transaction" title="Database transaction">transaction</a>-based systems.</p>
<p>Two applications may access the same database concurrently. However, changes made by one application may not be seen by the other application until after it restarts. This may be because each application loads the database in-memory at startup only.</p>
<h2><span class="mw-headline" id="References">References</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Gadfly_(database)&amp;action=edit&amp;section=14" title="Edit section: References">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="reflist" style="list-style-type: decimal;">
<ol class="references">
<li id="cite_note-1"><span class="mw-cite-backlink"><b><a href="#cite_ref-1">^</a></b></span> <span class="reference-text"><a rel="nofollow" class="external free" href="http://www.informit.com/articles/article.aspx?p=24698&amp;seqNum=8">http://www.informit.com/articles/article.aspx?p=24698&amp;seqNum=8</a>, InformIT, Gadfly—Zope's Integrated Demo Relational Database, Retrieved February 19, 2011.</span></li>
<li id="cite_note-2"><span class="mw-cite-backlink"><b><a href="#cite_ref-2">^</a></b></span> <span class="reference-text"><a rel="nofollow" class="external free" href="http://gadfly.sourceforge.net/gadfly.html">http://gadfly.sourceforge.net/gadfly.html</a>, SourceForge, Gadfly, Retrieved February 19, 2011.</span></li>
</ol>
</div>
<h2><span class="mw-headline" id="External_links">External links</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=Gadfly_(database)&amp;action=edit&amp;section=15" title="Edit section: External links">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="http://gadfly.sourceforge.net/">Official website</a></li>
<li><a rel="nofollow" class="external text" href="http://gadfly.sourceforge.net/faq.html">Gadfly FAQ</a></li>
</ul>


<!-- 
NewPP limit report
Parsed by mw1187
CPU time usage: 0.201 seconds
Real time usage: 0.552 seconds
Preprocessor visited node count: 1148/1000000
Preprocessor generated node count: 0/1500000
Post‐expand include size: 19383/2097152 bytes
Template argument size: 2039/2097152 bytes
Highest expansion depth: 19/40
Expensive parser function count: 5/500
Lua time usage: 0.067/10.000 seconds
Lua memory usage: 2.01 MB/50 MB
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%  483.433      1 - -total
 12.16%   58.809      1 - Template:Refimprove
  9.51%   45.971      2 - Template:Ambox
  9.36%   45.250      1 - Template:Infobox_software
  8.30%   40.140      1 - Template:Infobox
  7.06%   34.110      2 - Template:Clarify
  5.85%   28.267      2 - Template:Fix-span
  3.98%   19.246      6 - Template:Category_handler
  3.54%   17.134      1 - Template:Portal
  2.33%   11.263      1 - Template:Citation_needed
-->

<!-- Saved in parser cache with key enwiki:pcache:idhash:5281494-0!*!0!!en!4!* and timestamp 20150704111219 and revision id 574424191
 -->
<noscript><img src="//en.wikipedia.org/wiki/Special:CentralAutoLogin/start?type=1x1" alt="" title="" width="1" height="1" style="border: none; position: absolute;" /></noscript></div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://en.wikipedia.org/w/index.php?title=Gadfly_(database)&amp;oldid=574424191">https://en.wikipedia.org/w/index.php?title=Gadfly_(database)&amp;oldid=574424191</a>"					</div>
				<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="/wiki/Help:Category" title="Help:Category">Categories</a>: <ul><li><a href="/wiki/Category:Free_database_management_systems" title="Category:Free database management systems">Free database management systems</a></li><li><a href="/wiki/Category:Free_software_programmed_in_Python" title="Category:Free software programmed in Python">Free software programmed in Python</a></li></ul></div><div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden categories: <ul><li><a href="/wiki/Category:Articles_needing_additional_references_from_February_2011" title="Category:Articles needing additional references from February 2011">Articles needing additional references from February 2011</a></li><li><a href="/wiki/Category:All_articles_needing_additional_references" title="Category:All articles needing additional references">All articles needing additional references</a></li><li><a href="/wiki/Category:Wikipedia_articles_needing_clarification_from_May_2012" title="Category:Wikipedia articles needing clarification from May 2012">Wikipedia articles needing clarification from May 2012</a></li><li><a href="/wiki/Category:All_articles_with_unsourced_statements" title="Category:All articles with unsourced statements">All articles with unsourced statements</a></li><li><a href="/wiki/Category:Articles_with_unsourced_statements_from_September_2009" title="Category:Articles with unsourced statements from September 2009">Articles with unsourced statements from September 2009</a></li><li><a href="/wiki/Category:Articles_needing_cleanup_from_March_2012" title="Category:Articles needing cleanup from March 2012">Articles needing cleanup from March 2012</a></li><li><a href="/wiki/Category:All_pages_needing_cleanup" title="Category:All pages needing cleanup">All pages needing cleanup</a></li><li><a href="/wiki/Category:Articles_containing_how-to_sections" title="Category:Articles containing how-to sections">Articles containing how-to sections</a></li></ul></div></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>

			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-createaccount"><a href="/w/index.php?title=Special:UserLogin&amp;returnto=Gadfly+%28database%29&amp;type=signup" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li><li id="pt-login"><a href="/w/index.php?title=Special:UserLogin&amp;returnto=Gadfly+%28database%29" title="You're encouraged to log in; however, it's not mandatory. [o]" accesskey="o">Log in</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
															<li  id="ca-nstab-main" class="selected"><span><a href="/wiki/Gadfly_(database)"  title="View the content page [c]" accesskey="c">Article</a></span></li>
															<li  id="ca-talk"><span><a href="/wiki/Talk:Gadfly_(database)"  title="Discussion about the content page [t]" accesskey="t" rel="discussion">Talk</a></span></li>
													</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<h3 id="p-variants-label">
							<span>Variants</span><a href="#"></a>
						</h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
															<li id="ca-view" class="selected"><span><a href="/wiki/Gadfly_(database)" >Read</a></span></li>
															<li id="ca-edit"><span><a href="/w/index.php?title=Gadfly_(database)&amp;action=edit"  title="Edit this page [e]" accesskey="e">Edit</a></span></li>
															<li id="ca-history" class="collapsible"><span><a href="/w/index.php?title=Gadfly_(database)&amp;action=history"  title="Past versions of this page [h]" accesskey="h">View history</a></span></li>
													</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<h3 id="p-cactions-label"><span>More</span><a href="#"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>

						<form action="/w/index.php" id="searchform">
							<div id="simpleSearch">
							<input type="search" name="search" placeholder="Search" title="Search Wikipedia [f]" accesskey="f" id="searchInput" /><input type="hidden" value="Special:Search" name="title" /><input type="submit" name="fulltext" value="Search" title="Search Wikipedia for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton" /><input type="submit" name="go" value="Go" title="Go to a page with this exact name if one exists" id="searchButton" class="searchButton" />							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="/wiki/Main_Page"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id='p-navigation' aria-labelledby='p-navigation-label'>
			<h3 id='p-navigation-label'>Navigation</h3>

			<div class="body">
									<ul>
						<li id="n-mainpage-description"><a href="/wiki/Main_Page" title="Visit the main page [z]" accesskey="z">Main page</a></li><li id="n-contents"><a href="/wiki/Portal:Contents" title="Guides to browsing Wikipedia">Contents</a></li><li id="n-featuredcontent"><a href="/wiki/Portal:Featured_content" title="Featured content – the best of Wikipedia">Featured content</a></li><li id="n-currentevents"><a href="/wiki/Portal:Current_events" title="Find background information on current events">Current events</a></li><li id="n-randompage"><a href="/wiki/Special:Random" title="Load a random article [x]" accesskey="x">Random article</a></li><li id="n-sitesupport"><a href="https://donate.wikimedia.org/wiki/Special:FundraiserRedirector?utm_source=donate&amp;utm_medium=sidebar&amp;utm_campaign=C13_en.wikipedia.org&amp;uselang=en" title="Support us">Donate to Wikipedia</a></li><li id="n-shoplink"><a href="//shop.wikimedia.org" title="Visit the Wikimedia Shop">Wikipedia store</a></li>					</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-interaction' aria-labelledby='p-interaction-label'>
			<h3 id='p-interaction-label'>Interaction</h3>

			<div class="body">
									<ul>
						<li id="n-help"><a href="/wiki/Help:Contents" title="Guidance on how to use and edit Wikipedia">Help</a></li><li id="n-aboutsite"><a href="/wiki/Wikipedia:About" title="Find out about Wikipedia">About Wikipedia</a></li><li id="n-portal"><a href="/wiki/Wikipedia:Community_portal" title="About the project, what you can do, where to find things">Community portal</a></li><li id="n-recentchanges"><a href="/wiki/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-contactpage"><a href="//en.wikipedia.org/wiki/Wikipedia:Contact_us">Contact page</a></li>					</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
			<h3 id='p-tb-label'>Tools</h3>

			<div class="body">
									<ul>
						<li id="t-whatlinkshere"><a href="/wiki/Special:WhatLinksHere/Gadfly_(database)" title="List of all English Wikipedia pages containing links to this page [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="/wiki/Special:RecentChangesLinked/Gadfly_(database)" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-upload"><a href="/wiki/Wikipedia:File_Upload_Wizard" title="Upload files [u]" accesskey="u">Upload file</a></li><li id="t-specialpages"><a href="/wiki/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-permalink"><a href="/w/index.php?title=Gadfly_(database)&amp;oldid=574424191" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="/w/index.php?title=Gadfly_(database)&amp;action=info" title="More information about this page">Page information</a></li><li id="t-wikibase"><a href="//www.wikidata.org/wiki/Q5516340" title="Link to connected data repository item [g]" accesskey="g">Wikidata item</a></li><li id="t-cite"><a href="/w/index.php?title=Special:CiteThisPage&amp;page=Gadfly_%28database%29&amp;id=574424191" title="Information on how to cite this page">Cite this page</a></li>					</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-coll-print_export' aria-labelledby='p-coll-print_export-label'>
			<h3 id='p-coll-print_export-label'>Print/export</h3>

			<div class="body">
									<ul>
						<li id="coll-create_a_book"><a href="/w/index.php?title=Special:Book&amp;bookcmd=book_creator&amp;referer=Gadfly+%28database%29">Create a book</a></li><li id="coll-download-as-rdf2latex"><a href="/w/index.php?title=Special:Book&amp;bookcmd=render_article&amp;arttitle=Gadfly+%28database%29&amp;oldid=574424191&amp;writer=rdf2latex">Download as PDF</a></li><li id="t-print"><a href="/w/index.php?title=Gadfly_(database)&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>					</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-lang' aria-labelledby='p-lang-label'>
			<h3 id='p-lang-label'>Languages</h3>

			<div class="body">
									<ul>
						<li class="uls-p-lang-dummy"><a href="#"></a></li>					</ul>
				<div class='after-portlet after-portlet-lang'><span class="wb-langlinks-add wb-langlinks-link"><a href="//www.wikidata.org/wiki/Q5516340#sitelinks-wikipedia" title="Add interlanguage links" class="wbc-editpage">Add links</a></span></div>			</div>
		</div>
				</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 25 September 2013, at 06:31.</li>
											<li id="footer-info-copyright">Text is available under the <a rel="license" href="//en.wikipedia.org/wiki/Wikipedia:Text_of_Creative_Commons_Attribution-ShareAlike_3.0_Unported_License">Creative Commons Attribution-ShareAlike License</a><a rel="license" href="//creativecommons.org/licenses/by-sa/3.0/" style="display:none;"></a>;
additional terms may apply.  By using this site, you agree to the <a href="//wikimediafoundation.org/wiki/Terms_of_Use">Terms of Use</a> and <a href="//wikimediafoundation.org/wiki/Privacy_policy">Privacy Policy</a>. Wikipedia® is a registered trademark of the <a href="//www.wikimediafoundation.org/">Wikimedia Foundation, Inc.</a>, a non-profit organization.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-privacy"><a href="//wikimediafoundation.org/wiki/Privacy_policy" title="wikimedia:Privacy policy">Privacy policy</a></li>
											<li id="footer-places-about"><a href="/wiki/Wikipedia:About" title="Wikipedia:About">About Wikipedia</a></li>
											<li id="footer-places-disclaimer"><a href="/wiki/Wikipedia:General_disclaimer" title="Wikipedia:General disclaimer">Disclaimers</a></li>
											<li id="footer-places-contact"><a href="//en.wikipedia.org/wiki/Wikipedia:Contact_us">Contact Wikipedia</a></li>
											<li id="footer-places-developers"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/How_to_contribute">Developers</a></li>
											<li id="footer-places-mobileview"><a href="//en.m.wikipedia.org/w/index.php?title=Gadfly_(database)&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
											<li id="footer-copyrightico">
							<a href="//wikimediafoundation.org/"><img src="/static/images/wikimedia-button.png" srcset="/static/images/wikimedia-button-1.5x.png 1.5x, /static/images/wikimedia-button-2x.png 2x" width="88" height="31" alt="Wikimedia Foundation"/></a>						</li>
											<li id="footer-poweredbyico">
							<a href="//www.mediawiki.org/"><img src="//en.wikipedia.org/static/1.26wmf13/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="//en.wikipedia.org/static/1.26wmf13/resources/assets/poweredby_mediawiki_132x47.png 1.5x, //en.wikipedia.org/static/1.26wmf13/resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" /></a>						</li>
									</ul>
						<div style="clear:both"></div>
		</div>
		<script>if(window.jQuery)jQuery.ready();</script><script>if(window.mw){
mw.loader.state({"ext.globalCssJs.site":"ready","ext.globalCssJs.user":"ready","site":"loading","user":"ready","user.groups":"ready"});
}</script>
<link rel="stylesheet" href="//en.wikipedia.org/w/load.php?debug=false&amp;lang=en&amp;modules=ext.cite.styles%7Cext.gadget.DRN-wizard%2CReferenceTooltips%2CWatchlistGreenIndicators%2Ccharinsert%2Cfeatured-articles-links%2CrefToolbar%2Cswitcher%2Cteahouse%7Cext.wikimediaBadges&amp;only=styles&amp;skin=vector&amp;*" />
<script>if(window.mw){
mw.loader.load(["ext.cite.a11y","mediawiki.toc","mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.cirrusSearch.loggingSchema","mmv.bootstrap.autostart","ext.imageMetrics.loader","ext.eventLogging.subscriber","ext.wikimediaEvents","ext.wikimediaEvents.statsd","ext.navigationTiming","ext.gadget.teahouse","ext.gadget.ReferenceTooltips","ext.gadget.WatchlistGreenIndicators","ext.gadget.DRN-wizard","ext.gadget.charinsert","ext.gadget.refToolbar","ext.gadget.switcher","ext.gadget.featured-articles-links","ext.visualEditor.targetLoader","schema.UniversalLanguageSelector","ext.uls.eventlogger","ext.uls.interlanguage"],null,true);
}</script>
<script>if(window.mw){
document.write("\u003Cscript src=\"//en.wikipedia.org/w/load.php?debug=false\u0026amp;lang=en\u0026amp;modules=site\u0026amp;only=scripts\u0026amp;skin=vector\u0026amp;*\"\u003E\u003C/script\u003E");
}</script>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":80,"wgHostname":"mw1170"});
}</script>
	</body>
</html>
